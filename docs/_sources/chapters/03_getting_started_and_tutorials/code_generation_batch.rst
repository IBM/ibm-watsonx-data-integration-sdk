.. _getting_started_and_tutorials__code_generation_batch:

Code Generation (Batch)
=======================

:py:class:`ibm_watsonx_data_integration.services.datastage.codegen.python_generator.PythonGenerator` is an entry point that converts existing flows to Python SDK code.

For batch flows, you can use the
:py:class:`~ibm_watsonx_data_integration.services.datastage.codegen.python_generator.PythonGenerator`
class to automatically convert assets from zip or json format to python code.

Configuration
~~~~~~~~~~~~~

To use the :py:class:`~ibm_watsonx_data_integration.services.datastage.codegen.python_generator.PythonGenerator`, create an instance of the generator and set the desired configuration settings.

- ``mode``: Generate one file per flow (``'flow_per_file'`` by default) or combine into a single file (``'single_file'``).
- ``create_job``: Add code to create a job for each flow (True by default).
- ``run_job``: Add code to run the auto-created jobs. Only checked if ``create_job`` is True, and defaults to True.
- ``overwrite``: Allow overwriting the output directory (False by default).
- ``use_flow_name``: Use original flow names instead of autogenerated ones (True by default).
- ``api_key``: Provide your API key or update the placeholder later (default is a placeholder).
- ``project_id``: Provide your project ID or update the placeholder later (default is a placeholder).

.. code-block:: python

    >>> from ibm_watsonx_data_integration import *
    >>> from ibm_watsonx_data_integration.services.datastage import *
    >>>
    >>> # Declare a generator to use
    >>> generator = PythonGenerator()
    >>>
    >>> # Configure settings
    >>> generator.configuration.mode = 'file_per_flow'
    >>> generator.configuration.create_job = True
    >>> generator.configuration.run_job = True
    >>> generator.configuration.api_key = 'MY_API_KEY'          # pragma: allowlist secret
    >>> generator.configuration.project_id = 'MY_PROJECT_ID'

.. include:: ./shared/code_generation.rst
